<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>jQuery DOM Manipulation - Patti's Posies</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0">
    <link href="shopping.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        .highlighted {
            background-color: #ffff99;
            transition: background-color 0.3s;
        }
        .cart-item {
            padding: 0.5em;
            margin: 0.25em 0;
            background-color: #f0f8ff;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .quantity {
            margin: 0 0.5em;
            padding: 0.2em;
            width: 50px;
            text-align: center;
        }
        .total-section {
            margin-top: 1em;
            padding: 1em;
            background-color: #e6ffe6;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
        }
        .fade-in {
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }
        @keyframes fadeIn {
            to { opacity: 1; }
        }
    </style>
</head>

<body>
    <div id="container">
        <header>
            <h1>Patti's Posies - jQuery DOM Demo</h1>
        </header>
        <nav>
            <p><a href="index.html">Home</a> | <a href="orderform.html">Place an Order</a> | <a href="mums.html">Mums</a> | <a href="pansy.html">Pansies</a></p>
        </nav>
        
        <!-- jQuery Controls -->
        <div class="wrapper" style="margin: 1em 0;">
            <h3>jQuery Controls</h3>
            <button id="highlightAll">Highlight All Flowers</button>
            <button id="showPrices">Show/Hide Prices</button>
            <button id="clearCart">Clear Cart</button>
            <button id="toggleDescription">Toggle Description</button>
        </div>

        <div>
            <h2 id="pltTitle">Pansies</h2>
            <div id="desc">
                <h3>Enjoy happy and fragrant faces in your fall garden!</h3>
                <p>These colorful flowers bloom in winter when the rest of your landscape is brown and dull. Pansies come in a full range of colors from pastels to primary tones. Some varieties are trailing and work well in hanging baskets and containers. Pansy blooms are edible so add some to your kitchen garden for delicious and beautiful salads! Pansies are excellent companion plants for spring flowering bulbs like tulips and daffodils.</p>
            </div>

            <div id="gallery">
                <figure>
                    <figcaption>Rose Pansies</figcaption>
                    <img src="pansy1.jpg" class="flower" alt="Rose pansies">
                    <div class="price" style="display: none; color: green; font-weight: bold;">$12.99</div>
                    <span class="rating">
                        <img src="staroff.gif" class="star" data-rating="1">
                        <img src="staroff.gif" class="star" data-rating="2">
                        <img src="staroff.gif" class="star" data-rating="3">
                        <img src="staroff.gif" class="star" data-rating="4">
                        <img src="staroff.gif" class="star" data-rating="5">
                    </span><br>
                    <p class="add" id="pansy1" data-name="Rose Pansies" data-price="12.99">Add to Cart</p>
                </figure>
                <figure>
                    <figcaption>Multicolored Pansy</figcaption>
                    <img src="pansy2.jpg" class="flower" alt="Multicolored pansy">
                    <div class="price" style="display: none; color: green; font-weight: bold;">$15.99</div>
                    <span class="rating">
                        <img src="staroff.gif" class="star" data-rating="1">
                        <img src="staroff.gif" class="star" data-rating="2">
                        <img src="staroff.gif" class="star" data-rating="3">
                        <img src="staroff.gif" class="star" data-rating="4">
                        <img src="staroff.gif" class="star" data-rating="5">
                    </span><br>
                    <p class="add" id="pansy2" data-name="Multicolored Pansy" data-price="15.99">Add to Cart</p>
                </figure>
                <figure>
                    <figcaption>Dark Face Pansy</figcaption>
                    <img src="pansy3.jpg" class="flower" alt="Dark Face Pansy">
                    <div class="price" style="display: none; color: green; font-weight: bold;">$13.99</div>
                    <span class="rating">
                        <img src="staroff.gif" class="star" data-rating="1">
                        <img src="staroff.gif" class="star" data-rating="2">
                        <img src="staroff.gif" class="star" data-rating="3">
                        <img src="staroff.gif" class="star" data-rating="4">
                        <img src="staroff.gif" class="star" data-rating="5">
                    </span><br>
                    <p class="add" id="pansy3" data-name="Dark Face Pansy" data-price="13.99">Add to Cart</p>
                </figure>
                <figure>
                    <figcaption>Ruffled Pansy Mix</figcaption>
                    <img src="pansy4.jpg" class="flower" alt="Ruffled pansy mix">
                    <div class="price" style="display: none; color: green; font-weight: bold;">$18.99</div>
                    <span class="rating">
                        <img src="staroff.gif" class="star" data-rating="1">
                        <img src="staroff.gif" class="star" data-rating="2">
                        <img src="staroff.gif" class="star" data-rating="3">
                        <img src="staroff.gif" class="star" data-rating="4">
                        <img src="staroff.gif" class="star" data-rating="5">
                    </span><br>
                    <p class="add" id="pansy4" data-name="Ruffled Pansy Mix" data-price="18.99">Add to Cart</p>
                </figure>
                <figure>
                    <figcaption>Pastel Pansy Mix</figcaption>
                    <img src="pansy5.jpg" class="flower" alt="Pastel pansy mix">
                    <div class="price" style="display: none; color: green; font-weight: bold;">$16.99</div>
                    <span class="rating">
                        <img src="staroff.gif" class="star" data-rating="1">
                        <img src="staroff.gif" class="star" data-rating="2">
                        <img src="staroff.gif" class="star" data-rating="3">
                        <img src="staroff.gif" class="star" data-rating="4">
                        <img src="staroff.gif" class="star" data-rating="5">
                    </span><br>
                    <span class="add" id="pansy5" data-name="Pastel Pansy Mix" data-price="16.99">Add to Cart</span>
                </figure>
            </div>
            
            <hr>
            
            <div>
                <div class="wrapper">
                    <h3>Shopping Cart</h3>
                    <ul id="cart">
                        <li id="empty">Your shopping cart is empty</li>
                    </ul>
                    <div id="cartTotal" class="total-section" style="display: none;">
                        <p>Total Items: <span id="totalItems">0</span></p>
                        <p>Total Price: $<span id="totalPrice">0.00</span></p>
                    </div>
                </div>
            </div>
            
            <hr>
            <footer>
                <hr>
                <p> EL Centro College WebDev - jQuery DOM Manipulation Assignment</p>
                <p><a href="https://github.com/stylzsog11-del/javascript" target="_blank">View on GitHub</a></p>
            </footer>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            let cart = [];
            let isHighlighted = false;
            let pricesVisible = false;

            // Star rating functionality
            $('.star').hover(
                function() {
                    const rating = $(this).data('rating');
                    $(this).parent().find('.star').each(function(index) {
                        if (index < rating) {
                            $(this).attr('src', 'staron.gif');
                        } else {
                            $(this).attr('src', 'staroff.gif');
                        }
                    });
                },
                function() {
                    $(this).parent().find('.star').attr('src', 'staroff.gif');
                }
            );

            $('.star').click(function() {
                const rating = $(this).data('rating');
                $(this).parent().find('.star').each(function(index) {
                    if (index < rating) {
                        $(this).attr('src', 'staron.gif');
                    } else {
                        $(this).attr('src', 'staroff.gif');
                    }
                });
                
                // Add a visual feedback
                $(this).parent().parent().find('figcaption').addClass('highlighted');
                setTimeout(() => {
                    $(this).parent().parent().find('figcaption').removeClass('highlighted');
                }, 1000);
            });

            // Add to cart functionality
            $('.add').click(function() {
                const name = $(this).data('name');
                const price = parseFloat($(this).data('price'));
                const id = $(this).attr('id');

                // Check if item already exists in cart
                const existingItem = cart.find(item => item.id === id);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        id: id,
                        name: name,
                        price: price,
                        quantity: 1
                    });
                }

                updateCart();
                
                // Visual feedback
                $(this).addClass('highlighted');
                setTimeout(() => {
                    $(this).removeClass('highlighted');
                }, 500);
            });

            // Update cart display
            function updateCart() {
                const $cartList = $('#cart');
                const $empty = $('#empty');
                const $cartTotal = $('#cartTotal');

                if (cart.length === 0) {
                    $empty.show();
                    $cartTotal.hide();
                } else {
                    $empty.hide();
                    $cartTotal.show();
                    
                    // Clear existing items (except empty message)
                    $cartList.children().not('#empty').remove();
                    
                    let totalItems = 0;
                    let totalPrice = 0;

                    cart.forEach(item => {
                        totalItems += item.quantity;
                        totalPrice += item.price * item.quantity;

                        const cartItem = $(`
                            <li class="cart-item fade-in">
                                <div>
                                    <strong>${item.name}</strong><br>
                                    $${item.price.toFixed(2)} each
                                </div>
                                <div>
                                    <button class="quantity-btn" data-id="${item.id}" data-action="decrease">-</button>
                                    <span class="quantity">${item.quantity}</span>
                                    <button class="quantity-btn" data-id="${item.id}" data-action="increase">+</button>
                                    <button class="del" data-id="${item.id}">Remove</button>
                                </div>
                            </li>
                        `);
                        
                        $cartList.append(cartItem);
                    });

                    $('#totalItems').text(totalItems);
                    $('#totalPrice').text(totalPrice.toFixed(2));
                }
            }

            // Quantity and remove button handlers
            $(document).on('click', '.quantity-btn', function() {
                const id = $(this).data('id');
                const action = $(this).data('action');
                const item = cart.find(item => item.id === id);

                if (item) {
                    if (action === 'increase') {
                        item.quantity += 1;
                    } else if (action === 'decrease' && item.quantity > 1) {
                        item.quantity -= 1;
                    }
                    updateCart();
                }
            });

            $(document).on('click', '.del', function() {
                const id = $(this).data('id');
                cart = cart.filter(item => item.id !== id);
                updateCart();
            });

            // jQuery control buttons
            $('#highlightAll').click(function() {
                if (!isHighlighted) {
                    $('.flower').addClass('highlighted');
                    $(this).text('Remove Highlight');
                    isHighlighted = true;
                } else {
                    $('.flower').removeClass('highlighted');
                    $(this).text('Highlight All Flowers');
                    isHighlighted = false;
                }
            });

            $('#showPrices').click(function() {
                if (!pricesVisible) {
                    $('.price').slideDown();
                    $(this).text('Hide Prices');
                    pricesVisible = true;
                } else {
                    $('.price').slideUp();
                    $(this).text('Show Prices');
                    pricesVisible = false;
                }
            });

            $('#clearCart').click(function() {
                if (cart.length > 0) {
                    if (confirm('Are you sure you want to clear your cart?')) {
                        cart = [];
                        updateCart();
                        
                        // Visual feedback
                        $('#cart').fadeOut(300).fadeIn(300);
                    }
                }
            });

            $('#toggleDescription').click(function() {
                $('#desc').slideToggle();
                $(this).text($('#desc').is(':visible') ? 'Hide Description' : 'Show Description');
            });

            // Flower hover effects
            $('.flower').hover(
                function() {
                    $(this).animate({
                        opacity: 0.8,
                        transform: 'scale(1.05)'
                    }, 200);
                },
                function() {
                    $(this).animate({
                        opacity: 1,
                        transform: 'scale(1)'
                    }, 200);
                }
            );

            // Add some dynamic content
            setTimeout(function() {
                $('<p class="fade-in" style="text-align: center; color: #666; font-style: italic;">Click on flowers to add them to your cart! Use the star ratings to rate each variety.</p>')
                    .insertAfter('#pltTitle');
            }, 1000);
        });
    </script>
</body>

</html>